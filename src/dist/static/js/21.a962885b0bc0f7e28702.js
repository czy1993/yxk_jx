webpackJsonp([21],{Zpo5:function(e,t){},pCOu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("VLUi"),c=a("vMJZ"),r=a("JfnM"),i={data:function(){return{teacherMessage:{honorImg:"",certificateNo:"",honor:"",name:"",phone:"",photo:"",sex:"",subjectDict:"",teachAreasDict:""},honorImg:"../../../static/img/teacher/certificate_upload.png",photo:"../../../static/img/teacher/photo_upload.png",imgUrl:[],teachAreasDict:[],subjectDict:[],teachAreasDictValue:[],subjectDictValue:[]}},components:{EcRouterBack:a("zwmd").a},created:function(){this.save_getDict("subject"),this.save_getDict("teachAreas"),this.$route.query.name&&this.save_teacherList(this.$route.query.name)},methods:{save_pull:function(){this.$route.query.name?this.save_updateTeacher():this.save_addTeacher()},save_getDict:function(e){var t=this;Object(s.d)("?groupType="+e).then(function(a){200==a.code&&("subject"==e?t.subjectDict=a.data:"teachAreas"==e&&(t.teachAreasDict=a.data))})},save_teacherList:function(e){var t=this;Object(s.h)({current:1,name:e,phone:"",size:1}).then(function(e){200==e.code&&(t.teacherMessage=e.data.records[0],t.teachAreasDictValue=e.data.records[0].teachAreasDict.split(","),t.subjectDictValue=e.data.records[0].subjectDict.split(","))})},save_addTeacher:function(){var e=this;this.teacherMessage.subjectDict=this.subjectDictValue.join(","),this.teacherMessage.teachAreasDict=this.teachAreasDictValue.join(","),Object(s.b)(this.teacherMessage).then(function(t){200==t.code&&e.$message({message:"提交成功",type:"success",onClose:function(){e.$router.go(-1)}})})},save_updateTeacher:function(){var e=this;this.teacherMessage.subjectDict=this.subjectDictValue.join(","),this.teacherMessage.teachAreasDict=this.teachAreasDictValue.join(","),Object(s.i)(this.teacherMessage).then(function(t){e.$message({message:"编辑成功",type:"success",onClose:function(){e.$router.go(-1)}})})},save_uploadSingle:function(e){var t,a=this,s=void 0;if(0!=(t=this.$refs[e].files).length)if("image/png"!==(s=t[0]).type||"image/jpg"!==s.type||"image/jpeg"!==s.type)this.$message.error("图片格式必须为 .png, .jpg 或者 .jpeg 格式");else if(s.size>10240)this.$message.error("请选择10MB以内的图片！");else{var i=new FormData;i.append("file",s),Object(c.q)(i,"agency").then(function(t){200==t.code?(a[e]=r.a.getObjectURL(a.$refs[e].files[0]),"honorImg"==e?(a.imgUrl.push(t.data),a.teacherMessage[e]=a.imgUrl.join(",")):a.teacherMessage[e]=t.data):a.$message.error("上传失败")})}}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"education_add_teacher"}},[a("div",{staticClass:"add_teacher_container"},[a("EcRouterBack",{attrs:{routerName:"teacher"}}),e._v(" "),a("div",{staticClass:"main"},[a("el-form",{ref:"form",attrs:{model:e.teacherMessage,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.teacherMessage.name,callback:function(t){e.$set(e.teacherMessage,"name",t)},expression:"teacherMessage.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{push:9,span:7}},[a("el-form-item",{attrs:{label:"性别"}},[a("div",{staticStyle:{width:"60%"}},[a("el-select",{model:{value:e.teacherMessage.sex,callback:function(t){e.$set(e.teacherMessage,"sex",t)},expression:"teacherMessage.sex"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1)],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{type:"number"},model:{value:e.teacherMessage.phone,callback:function(t){e.$set(e.teacherMessage,"phone",t)},expression:"teacherMessage.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{push:9,span:7}},[a("el-form-item",{attrs:{label:"资格证号"}},[a("el-input",{model:{value:e.teacherMessage.certificateNo,callback:function(t){e.$set(e.teacherMessage,"certificateNo",t)},expression:"teacherMessage.certificateNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"教学范围"}},[a("el-select",{attrs:{multiple:""},model:{value:e.teachAreasDictValue,callback:function(t){e.teachAreasDictValue=t},expression:"teachAreasDictValue"}},e._l(e.teachAreasDict,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{push:9,span:7}},[a("el-form-item",{attrs:{label:"科目"}},[a("div",[a("el-select",{attrs:{multiple:""},model:{value:e.subjectDictValue,callback:function(t){e.subjectDictValue=t},expression:"subjectDictValue"}},e._l(e.subjectDict,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"荣誉"}},[a("div",{staticClass:"text_area"},[a("el-input",{attrs:{rows:"6","show-word-limit":"",maxlength:"200",type:"textarea",placeholder:"每行一个"},model:{value:e.teacherMessage.honor,callback:function(t){e.$set(e.teacherMessage,"honor",t)},expression:"teacherMessage.honor"}})],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"_upload"},[a("div",[a("input",{ref:"honorImg",staticClass:"fileBut",attrs:{type:"file"},on:{change:function(t){return e.save_uploadSingle("honorImg")}}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.honorImg,expression:"honorImg!=''"}],attrs:{src:e.honorImg,alt:""}})]),e._v(" "),a("div",[a("input",{ref:"photo",staticClass:"fileBut",attrs:{type:"file"},on:{change:function(t){return e.save_uploadSingle("photo")}}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.photo,expression:"photo!=''"}],attrs:{src:e.photo,alt:""}})])])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("button",{on:{click:function(t){return e.save_pull()}}},[e._v("提交")])])])},staticRenderFns:[]};var l=a("C7Lr")(i,o,!1,function(e){a("Zpo5")},null,null);t.default=l.exports}});
//# sourceMappingURL=21.a962885b0bc0f7e28702.js.map