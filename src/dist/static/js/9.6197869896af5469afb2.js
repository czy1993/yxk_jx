webpackJsonp([9],{"1fdT":function(t,e){},"1ktv":function(t,e){},cLFM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("YXVF"),a=s("6k77"),n=s("VE1u"),o=s("8ghC"),r=s("iFss"),u=s("kfLN"),c=s("zwmd"),l={data:function(){return{types:"",superposition:"",subtractPrice:0,satisfyPrice:0,areaIds:[],couponNum:0,expireTime:"",expireDay:"",discoutTen:0,discoutBit:0,show1:!1,coursesData:[]}},components:{Popup:u.a,EcRouterBack:c.a},created:function(){this.save_queryCourses()},methods:{save_queryCourses:function(){var t=this;Object(o.e)("1").then(function(e){200==e.code&&(t.coursesData=e.data)})},form_verification:function(){""==this.types?this.$message.error("请选择优惠券类型"):"1"==this.types?""==this.superposition||""==this.satisfyPrice||""==this.subtractPrice||""==this.superposition||""==this.expireDay||0==this.couponNum||""==this.expireTime?this.$message.error("请填写完整的优惠券信息"):this.show1=!0:"2"==this.types&&(""==this.superposition||""==this.discoutBit||""==this.discoutTen||""==this.superposition||""==this.expireDay||0==this.couponNum||""==this.expireTime?this.$message.error("请填写完整的优惠券信息"):this.show1=!0)},save_setCoupon:function(){var t=this;Object(o.g)({areaIds:this.areaIds.join(","),couponNum:this.couponNum,discout:Number(this.discoutTen+"."+this.discoutBit),expireTime:this.expireDay+" "+this.expireTime,satisfyPrice:Number(this.satisfyPrice),subtractPrice:Number(this.subtractPrice),superposition:this.superposition,type:this.types}).then(function(e){200==e.code&&t.$message({message:"设定成功",type:"success",onClose:function(){t.$emit("event1","1")}})})},get_types:function(t){console.log(t),this.show1=t}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"marketing-set"},[s("div",{staticClass:"marketingSet-content"},[s("EcRouterBack",{attrs:{routerName:"marketing"}}),t._v(" "),s("h4",[t._v("优惠券设定")]),t._v(" "),s("div",{staticClass:"marketingSet-form"},[s("div",{staticClass:"form-view"},[s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("类型")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-select",{model:{value:t.types,callback:function(e){t.types=e},expression:"types"}},[s("el-option",{attrs:{value:"",label:"选择类型"}}),t._v(" "),s("el-option",{attrs:{value:"1",label:"满减"}}),t._v(" "),s("el-option",{attrs:{value:"2",label:"折扣"}})],1)],1)]),t._v(" "),s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("叠加使用")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-select",{model:{value:t.superposition,callback:function(e){t.superposition=e},expression:"superposition"}},[s("el-option",{attrs:{value:"",label:"是/否"}}),t._v(" "),s("el-option",{attrs:{value:"1",label:"是"}}),t._v(" "),s("el-option",{attrs:{value:"2",label:"否"}})],1)],1)])]),t._v(" "),s("div",{staticClass:"form-view"},[s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("满减")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-input",{attrs:{type:"number",disabled:"1"!=t.types,min:"0",placeholder:"1000"},model:{value:t.satisfyPrice,callback:function(e){t.satisfyPrice=e},expression:"satisfyPrice"}}),t._v(" "),s("span",[t._v("-")]),t._v(" "),s("el-input",{attrs:{type:"number",disabled:"1"!=t.types,min:"0",placeholder:"200"},model:{value:t.subtractPrice,callback:function(e){t.subtractPrice=e},expression:"subtractPrice"}})],1)]),t._v(" "),s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("折扣")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-input",{attrs:{type:"number",disabled:"2"!=t.types,min:"0",placeholder:""},model:{value:t.discoutTen,callback:function(e){t.discoutTen=e},expression:"discoutTen"}}),t._v(" "),s("span"),t._v(" "),s("el-input",{attrs:{type:"number",disabled:"2"!=t.types,min:"0",placeholder:""},model:{value:t.discoutBit,callback:function(e){t.discoutBit=e},expression:"discoutBit"}}),t._v(" "),s("span",[t._v("折")])],1)])]),t._v(" "),s("div",{staticClass:"form-view"},[s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("数量")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-input",{staticClass:"from-nums",attrs:{type:"number",min:"0"},model:{value:t.couponNum,callback:function(e){t.couponNum=e},expression:"couponNum"}})],1)]),t._v(" "),s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("过期时间")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-date-picker",{attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.expireDay,callback:function(e){t.expireDay=e},expression:"expireDay"}}),t._v(" "),s("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"任意时间点"},model:{value:t.expireTime,callback:function(e){t.expireTime=e},expression:"expireTime"}})],1)])]),t._v(" "),s("div",{staticClass:"form-view"},[s("div",{staticClass:"form-view-v"},[s("span",{staticClass:"form-name"},[t._v("使用范围")]),t._v(" "),s("div",{staticClass:"form-inputs"},[s("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.areaIds,callback:function(e){t.areaIds=e},expression:"areaIds"}},t._l(t.coursesData,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])])]),t._v(" "),s("div",{staticClass:"buts",on:{click:function(e){return t.form_verification()}}},[t._v("确认")])],1),t._v(" "),s("Popup",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}],on:{event1:function(e){return t.get_types(e)}}},[s("div",{attrs:{slot:"texts"},slot:"texts"},[s("p",[s("span",[t._v("类型:")]),t._v(" "),s("span",[t._v(t._s("1"==t.types?"满减":"折扣"))])]),t._v(" "),s("p",[s("span",[t._v("叠加使用:")]),t._v(" "),s("span",[t._v(t._s("1"==t.superposition?"是":"否"))])]),t._v(" "),"1"==t.types?s("p",[t._v(t._s("满"+t.satisfyPrice+"-"+t.subtractPrice))]):s("p",[t._v(t._s("折扣"+t.discoutTen+"."+t.discoutBit+"折"))]),t._v(" "),s("p",[s("span",[t._v("过期时间:")]),t._v(" "),s("span",[t._v(t._s(this.expireDay+" "+this.expireTime))])]),t._v(" "),s("p",[s("span",[t._v("使用范围:")]),t._v(" "),s("span",[t._v(t._s(t.areaIds.toString()))])])]),t._v(" "),s("div",{attrs:{slot:"buttom"},slot:"buttom"},[s("span",{on:{click:function(e){return t.save_setCoupon()}}},[t._v("发布")])])])],1)},staticRenderFns:[]};var v=s("C7Lr")(l,p,!1,function(t){s("1ktv")},"data-v-7fecb674",null).exports,d={data:function(){return{couponData:[{id:2,userCouponNum:"220177591190",phone:"18673452291",status:"2",type:"2",getTime:"2020-03-16 00:32:15",useTime:"2020-03-16 17:15:18",expirationTime:null}],size:10,current:1,show1:"1",total:0,status:{1:"未使用",2:"已使用"},types:{1:"满减",2:"折扣"}}},components:{EcButton:i.a,EcTable:a.a,EcPagination:n.a,Setcoupon:v},created:function(){this.save_queryUserCoupon(this.size,this.current)},methods:{save_queryUserCoupon:function(t,e){var s=this;Object(o.f)("?size="+t+"&current="+e).then(function(t){200==t.code&&(s.couponData=t.data.records,s.total=t.data.total)})},changes:function(){this.show1="2"},onChild:function(t){this.show1=t},handleSizeChange:function(t){this.size=t,this.save_queryUserCoupon(this.size,this.current)},handleCurrentChange:function(t){this.current=t,this.save_queryUserCoupon(this.size,this.current)},handleExportExcel:function(){var t=this.formatJson(["userCouponNum","phone","status","type","getTime","useTime","expirationTime"],this.couponData);Object(r.a)({header:["券号","手机号","状态","种类","获取时间","使用时间","过期时间"],data:t,filename:"优惠券管理"})},formatJson:function(t,e){var s=this;return e.map(function(e){return t.map(function(t){return"status"===t?s.status[e[t]]:"type"===t?s.types[e[t]]:e[t]||"/"})})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"education_views",attrs:{id:"coupon"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.show1,expression:"show1=='1'"}],staticClass:"education_header"},[s("ec-button",{staticClass:"header-buts",nativeOn:{click:function(e){return t.changes()}}},[t._v("优惠券设定")]),t._v(" "),s("ec-button",{nativeOn:{click:function(e){return t.handleExportExcel(e)}}},[t._v("导出Excel")])],1),t._v(" "),s("div",{staticClass:"education_centont"},["1"==t.show1?s("div",{staticClass:"coupon_contont"},[s("EcTable",{attrs:{tableData:t.couponData}},[s("el-table-column",{attrs:{prop:"id",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.id))])]}}],null,!1,773642443)}),t._v(" "),s("el-table-column",{attrs:{prop:"userCouponNum",label:"券号"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.userCouponNum))])]}}],null,!1,4283547785)}),t._v(" "),s("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.phone))])]}}],null,!1,4187750426)}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.status?s("span",{staticClass:"common_base"},[t._v("已使用")]):s("span",{staticClass:"common_base base_1"},[t._v("未使用")])]}}],null,!1,2018886265)}),t._v(" "),s("el-table-column",{attrs:{prop:"type",label:"种类",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.type?s("span",[t._v("满减")]):s("span",[t._v("折扣")])]}}],null,!1,2397069347)}),t._v(" "),s("el-table-column",{attrs:{prop:"getTime",label:"获取时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.getTime))])]}}],null,!1,280608261)}),t._v(" "),s("el-table-column",{attrs:{prop:"useTime",label:"使用时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.useTime?e.row.useTime:"/"))])]}}],null,!1,3469790668)}),t._v(" "),s("el-table-column",{attrs:{prop:"expirationTime",label:"过期时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.expirationTime?e.row.expirationTime:"/"))])]}}],null,!1,4282945900)})],1)],1):s("div",[s("Setcoupon",{on:{event1:function(e){return t.onChild(e)}}})],1)]),t._v(" "),s("EcPagination",{directives:[{name:"show",rawName:"v-show",value:t.total>10,expression:"total>10"}],attrs:{total:t.total,currentPage:t.current},on:{"size-change":function(e){return t.handleSizeChange(e)},"current-change":function(e){return t.handleCurrentChange(e)}}})],1)},staticRenderFns:[]};var f=s("C7Lr")(d,m,!1,function(t){s("j7H3")},"data-v-a985f7fe",null);e.default=f.exports},j7H3:function(t,e){},kfLN:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"popup"}},[s("div",{staticClass:"popup-backgrount",on:{click:function(e){return t.toParent(!1)}}}),t._v(" "),s("div",{staticClass:"popup-view"},[s("div",{staticClass:"popup-text"},[t._t("texts")],2),t._v(" "),s("div",{staticClass:"popup-buts"},[t._t("buttom")],2)])])},staticRenderFns:[]};var a=s("C7Lr")({methods:{toParent:function(t){this.$emit("event1",t)}}},i,!1,function(t){s("1fdT")},"data-v-5a217dbc",null);e.a=a.exports}});
//# sourceMappingURL=9.6197869896af5469afb2.js.map